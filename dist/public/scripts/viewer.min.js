function Viewer(e){}function ViewerChips(e){var t={},i=[];this.getChips=function(){for(var n=e.cards.length,o=[],r=0;r<n;r++){var c=e.cards[r].getAttribute("data-keywords").split(","),s=c[0].trim().replace(/\s+/g,"-").toLowerCase();o.push({tag:s,id:s}),i=i.concat(c)}for(var a=i.length;a--;){var l=i[a];t[l]||(i.unshift(l),t[l]=!0)}this.chips=i,this.chipsListObj=t},this.initChips=function(){}}!function(){"use strict";var e=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&("https:"===window.location.protocol||e)&&navigator.serviceWorker.register("service-worker.js").then(function(e){e.onupdatefound=function(){if(navigator.serviceWorker.controller){var t=e.installing;t.onstatechange=function(){switch(t.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}}})["catch"](function(e){console.error("Error during service worker registration:",e)})}();var viewerGrid=document.getElementById("viewer-cards"),viewerOptions={grid:viewerGrid,viewerCounter:document.getElementById("viewer-counter"),cards:viewerGrid.querySelectorAll(".viewer-item"),filterChips:document.getElementById("viewer-filter-chips")},Chips=new ViewerChips(viewerOptions);Chips.getChips(),console.info(Chips.chips),function(e){e(function(){var t={chips:[]},i=e("#viewer-cards"),n=e("#viewer-counter"),o={},r=[],c={},s=e(".viewer-item",i),a={cellSelector:".flickity-item",wrapAround:!0,selectedAttraction:.2,friction:.8,resize:!0,pageDots:!1,cellAlign:"center"},l=function(){s.removeClass("hide-item")},d=function(){i.flickity&&(i.flickity("destroy"),s.addClass("hide-item"));var t=i.flickity(a);e(".flickity-item",i).removeClass("hide-item");var o=t.data("flickity"),r=function(){var e=o.selectedIndex+1;n.text(e+"/"+o.slides.length)};t.on("select.flickity",r),r()},p=function(){var i=function(i,n){var r=e(n);if(r.removeClass("flickity-item"),t.selected)r.data("keywords").indexOf(t.selected)>-1&&r.addClass("flickity-item");else{t.chips=o.material_chip("data").map(function(e){return e.tag});for(var c=0;c<t.chips.length;c++)if(r.data("keywords").indexOf(t.chips[c])>-1){r.addClass("flickity-item");break}}};n.removeClass("thud"),window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){n.addClass("thud")})}),s.each(i).promise().done(d)},u=function(){probPhone?p():probPhone||i.isotope()},f=function(){var n=function(){var i=!0,n=e(this);if(!t.selected){t.chips=o.material_chip("data").map(function(e){return e.tag});for(var r=0;r<t.chips.length;r++)if(n.data("keywords").indexOf(t.chips[r])>-1)return!0;return!1}return i=n.data("keywords").indexOf(t.selected)>-1};i.isotope({layoutMode:"packery",packery:{columnWidth:".grid-sizer",gutter:".gutter-sizer"},itemSelector:".grid-item",percentPosition:!0,resize:!0,filter:n}),e("img",s).each(function(t,n){e("<img/>").attr("src",n.src).load(function(){e(this).remove(),i.isotope()})}),l()},h=function(){probPhone?(i.hasClass("isotope")&&i.isotope("destroy"),i.flickity?i.flickity&&setTimeout(d,100):async(["https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"],d)):(i.hasClass("flickity-enabled")&&i.flickity("destroy"),i.isotope?i.isotope&&setTimeout(f,100):async(["https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"],function(){async(["https://cdn.jsdelivr.net/npm/isotope-packery@2.0.0/packery-mode.pkgd.min.js"],f)}))},m=function(t,i){var n=e(i).text().trim();e(i).is(":first-child")&&r.push({tag:n,id:n.trim().replace(/\s+/g,"-").toLowerCase()}),null!==c[n]&&(c[n]=null)},g=function(){o=e("#viewer-chips"),o.material_chip({data:r,placeholder:"...",autocompleteOptions:{data:c,limit:1/0,minLength:1}}),e("input",o).focus(),o.on("click",function(){t.selected&&(t.selected=null,u())}),o.on("chip.select",function(e,i){t.selected=i.tag,u()}),o.on("chip.add",u),o.on("chip.delete",function(e){t.selected===e.tag&&(t.selected=null),u()})};e(".card-action .chip",i).each(m).promise().done(g,h),e(".info-spot").click(function(){e(".tap-target").tapTarget("open")}),e(".toggle-filter a").click(function(){var t=document.createElement("style");t.innerHTML=".filter-on.viewer-filter { min-height: "+(o.height()+30)+"px; will-change: min-height;}",document.body.appendChild(t),e(".viewer-filter,.toggle-filter").toggleClass("filter-on")})})}(jQuery);var $contWrap=$("#la-content-wrapper");!function(e){e(function(){e(".button-collapse").sideNav({onOpen:function(){setTimeout(function(){Materialize.showStaggeredList("#nav-mobile")},50),$contWrap.addClass("la-blur")},onClose:function(t){e("li",t).css({opacity:0}),$contWrap.removeClass("la-blur")}})})}(jQuery);
//# sourceMappingURL=viewer.min.js.map
