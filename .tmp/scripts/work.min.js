var laViewer=function(e){var t={gridId:"viewer-cards",counterId:"viewer-counter",cardClass:".viewer-item",viewerFilterChipsId:"viewer-filter-chips",filterChipsId:"viewer-filter-chips",cardChipClass:".card-action .chip",materializeChips:!0,chipOptions:{placeholder:"...",secondaryPlaceholder:"...",autocompleteOptions:{limit:1/0,minLength:1}},flickity:{cellSelector:".flickity-item",wrapAround:!0,selectedAttraction:.2,friction:.8,resize:!0,pageDots:!1,cellAlign:"center"},isotope:{layoutMode:"packery",packery:{columnWidth:".grid-sizer",gutter:".gutter-sizer"},itemSelector:".grid-item",percentPosition:!0,resize:!0}};$.extend(t,e);var i=document.getElementById(t.gridId),n=document.getElementById(t.counterId),o=i.querySelectorAll(t.cardClass),c=document.getElementById(t.viewerFilterChipsId),r=$(c),a=/iphone|android|ie|blackberry|fennec/.test(navigator.userAgent.toLowerCase())&&"ontouchstart"in document.documentElement,s={chips:[]},l=function(){var e=Array.prototype.slice.call(c.querySelectorAll(".chip")).map(function(e){return e.firstChild.textContent});return e},d=function(){var e=$(i),n=t.isotope,c=function(){var e=this.getAttribute("data-keywords").split(","),t=!0;if(!s.selected){s.chips=l();for(var i=0;i<s.chips.length;i++)if(e.indexOf(s.chips[i])>-1)return!0;return!1}return t=e.indexOf(s.selected)>-1};n.filter=c,e.isotope(n),$("img",o).each(function(t,i){$("<img/>").attr("src",i.src).load(function(){$(this).remove(),e.isotope()})});for(var r=0,a=o.length;r<a;r++)o[r].classList.remove("hide-item")},m=function(){var e=$(i),c=e.data("flickity");n.classList.remove("thud"),window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){n.classList.add("thud")})});for(var r=0,a=o.length;r<a;r++){var d=o[r],m=d.getAttribute("data-keywords").split(",");if(d.classList.remove("flickity-item"),d.classList.add("hide-item"),s.selected)d.getAttribute("data-keywords").indexOf(s.selected)>-1&&d.classList.add("flickity-item");else{s.chips=s.chips=l();for(var p=0,u=s.chips.length;p<u;p++)m.indexOf(s.chips[p])>-1&&d.classList.add("flickity-item")}}c&&e.flickity("destroy");for(var f=e.flickity(t.flickity),h=0,g=o.length;h<g;h++){var y=o[h];y.classList.contains("flickity-item")&&y.classList.remove("hide-item")}var v=f.data("flickity"),k=function(){var e=v.selectedIndex+1;n.innerHTML=e+"/"+v.slides.length};f.on("select.flickity",k),k()},p=function(){function e(){var e=this.getAttribute("data-lg-image"),t=setTimeout(function(){$(".loader-container").fadeIn("slow")},300);$("<img/>").attr("src",e).load(function(){clearTimeout(t),$(".loader-container").hide(),$(".img-container .image",o).html(this),$(".img-container",o).fadeIn(),$(".img-container",o).panzoom&&($(".img-container",o).panzoom({minScale:1,panOnlyWhenZoomed:!0}),$(".panzoom .close",o).on("touchstart",function(e){e.stopImmediatePropagation()}))}),o.fadeIn("fast")}function t(){$(".img-container .image",o).html(""),$(".img-container",o).hide(),o.fadeOut("fast"),$(".img-container",o).panzoom&&$(".img-container",o).panzoom("reset")}var n=$(i),o=$("#la-viewer-overlay");a?(i.isotope&&n.isotope("destroy"),n.flickity?n.flickity&&setTimeout(m,100):(async(["https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"],m),async(["https://cdn.jsdelivr.net/npm/jquery.panzoom@3.2.2/dist/jquery.panzoom.min.js"]))):(n.flickity&&n.flickity("destroy"),n.isotope?n.isotope&&setTimeout(d,100):async(["https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"],function(){async(["https://cdn.jsdelivr.net/npm/isotope-packery@2.0.0/packery-mode.pkgd.min.js"],d)})),$("[data-lg-image]",n).click(e),o.click(t)},u=function(){a?m():a||$(i).isotope()},f=function(e){for(var i=[],n=[],c={},r=o.length,a=0;a<r;a++){var l=o[a].getAttribute("data-keywords").split(","),d=l[0].trim().replace(/\s+/g,"-").toLowerCase();i.push({tag:d,id:d}),n=n.concat(l)}for(var m=n.length,p=0;p<m;p++){var f=n[p];c[f]||(c[f]=null)}var h=t.chipOptions;h.data=i,h.autocompleteOptions.data=c,e.material_chip(h),$("input",e).focus(),e.on("click",function(){s.selected&&(s.selected=null,u())}),e.on("chip.select",function(e,t){s.selected=t.tag,u()}),e.on("chip.add",u),e.on("chip.delete",function(e){s.selected===e.tag&&(s.selected=null),u()})},h=function(e){return t.materializeChips?f(e):$(".chip",e).on("click",function(){var t=this.innerText;console.info(t,this),s.selected===t?(s.selected=null,$(this).removeClass("selected")):($(".chip",e).removeClass("selected"),$(this).addClass("selected"),s.selected=t),u()}),e},g=function(){function e(){var e=document.createElement("style"),t=r.height();e.innerHTML=".filter-on.viewer-filter { min-height: "+(t+30)+"px; will-change: min-height;}",document.body.appendChild(e);for(var i=document.querySelectorAll(".tap-target-row,.viewer-filter,.toggle-filter"),n=0,o=i.length;n<o;n++)i[n].classList.toggle("filter-on")}r=h(r),$(".toggle-filter a").click(e),p()};g()};
//# sourceMappingURL=work.min.js.map
